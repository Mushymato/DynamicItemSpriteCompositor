{
  "$schema": "https://smapi.io/schemas/content-patcher.json",
  "Format": "2.8.0",
  "ConfigSchema": {
    "EnableFlours": {
      "AllowValues": "true,false",
      "Default": "true"
    }
  },
  "Changes": [
    {
      "Action": "EditData",
      "Target": "Strings/Objects",
      "Entries": {
        "{{ModId}}_FlourName": "{0} Flour",
        "WheatFlour_Description": "A common cooking ingredient made from crushed {0}."
      }
    },
    {
      "Action": "EditData",
      "Target": "Data/Machines",
      "TargetField": [
        "(BC)Dehydrator",
        "OutputRules"
      ],
      "Entries": {
        "{{ModId}}_Flour": {
          "Id": "{{ModId}}_Flour",
          "Triggers": [
            {
              "Trigger": "ItemPlacedInMachine",
              "RequiredTags": [
                "category_vegetable"
              ],
              "RequiredCount": 1
            },
            {
              "Trigger": "ItemPlacedInMachine",
              "RequiredTags": [
                "category_fruits"
              ],
              "RequiredCount": 1
            }
          ],
          "OutputItem": [
            {
              "Id": "{{ModId}}_Flour",
              "ItemId": "(O)246",
              "ObjectDisplayName": "[LocalizedText Strings\\Objects:{{ModId}}_FlourName %PRESERVED_DISPLAY_NAME]",
              "ObjectInternalName": "{0} FLour",
              "PreserveId": "DROP_IN"
            }
          ],
          "MinutesUntilReady": 60
        }
      },
      "MoveEntries": [
        {
          "ID": "{{ModId}}_Flour",
          "ToPosition": "Top"
        }
      ]
    },
    {
      "Action": "Load",
      "Target": "{{ModId}}/wagflours,{{ModId}}/machines",
      "FromFile": "assets/{{TargetWithoutPath}}.png"
    },
    {
      "Action": "EditData",
      "Target": "mushymato.DISCO/Data/{{ModId}}",
      "Entries": {
        "Flour": {
          "TypeIdentifier": "(O)",
          "LocalItemId": "246",
          "SourceTextures": "{{ModId}}/wagflours",
          "Rules": [
            {
              "RequiredContextTags": "preserve_sheet_index_270",
              "SpriteIndexList": 0
            },
            {
              "RequiredContextTags": "preserve_sheet_index_262",
              "SpriteIndexList": 1
            },
            {
              "RequiredContextTags": "preserve_sheet_index_88",
              "SpriteIndexList": 2
            }
          ]
        },
        "Furnacey": {
          "TypeIdentifier": "(BC)",
          "LocalItemId": "156",
          "SourceTextures": "{{ModId}}/machines",
          "Rules": [
            {
              "SpriteIndexList": "0,2",
              "IncludeDefaultSpriteIndex": true,
            },
          ]
        },
        "PerThing": {
          "TypeIdentifier": "(BC)",
          "LocalItemId": "Dehydrator",
          "SourceTextures": "{{ModId}}/machines",
          "Rules": [
            {
              "HeldObject": {
                "RequiredContextTags": "preserve_sheet_index_270",
              },
              "SpriteIndexList": 6
            },
            {
              "HeldObject": {
                "RequiredContextTags": "preserve_sheet_index_262",
              },
              "SpriteIndexList": 7
            },
            {
              "HeldObject": {
                "RequiredContextTags": "preserve_sheet_index_88",
              },
              "SpriteIndexList": 8
            }
          ]
        }
      },
      "When": {
        "EnableFlours": true
      }
    }
  ]
}
